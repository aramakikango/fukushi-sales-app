<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      :root { color-scheme: light dark; }
      *, *::before, *::after { box-sizing: border-box; }
      html, body { width:100%; max-width:100%; overflow-x:hidden; }
  body { font-family: Arial, sans-serif; padding: 24px; margin: 0; }
      nav { display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
      nav a { margin-right: 12px; display:inline-block; padding:6px 8px; }
      /* compact floating theme toggle (icon) */
      #themeToggleBtn {
        width:44px; height:44px; display:flex; align-items:center; justify-content:center;
        position:fixed; top:12px; right:12px; z-index:9999;
        border-radius:999px; border:1px solid rgba(12,102,212,0.12);
        background:#fff; color:#0c66d4; box-shadow:0 2px 6px rgba(0,0,0,0.08); cursor:pointer;
        font-size:18px; line-height:1;
      }
      #themeToggleBtn:hover { transform:scale(1.06); }
      label { display:block; margin-top:12px; }
      input, select, textarea { width:100%; padding:8px; box-sizing:border-box; }
      button { margin-top: 12px; padding:8px 14px; }
  .table-wrap { width:100%; overflow-x:auto; -webkit-overflow-scrolling: touch; }
      table { width:100%; border-collapse: collapse; margin-top: 16px; min-width: 760px; }
      th, td { border-bottom:1px solid #eee; padding:8px; text-align:left; }
      .muted { color:#666; font-size:12px; }
  .row { display:grid; grid-template-columns: minmax(0,1fr) minmax(0,1fr); gap: 12px; }
  @media (max-width: 720px) { .row { grid-template-columns: 1fr; } body { padding: 16px; } input, select, textarea { font-size:18px; } button { padding:12px 16px; min-height:clamp(48px,8vh,64px); font-size:clamp(16px,2.8vw + 12px,20px); width:100%; border-radius:10px; } }
      /* Mobile: stack nav vertically and make full-width buttons */
      @media (max-width: 650px) {
        nav { flex-direction: column; align-items: stretch; }
        nav a, nav button { width: 100%; margin: 0 0 8px 0; border-radius: 10px; min-height: clamp(56px,10vh,72px); font-size: clamp(16px, 2.8vw + 12px, 20px); padding: clamp(14px,2vh,18px) 18px; }
  nav a { margin-right: 0; }
      }
      @media (prefers-color-scheme: dark) {
        body { background:#111; color:#eaeaea; }
        a { color:#8ab4ff; }
        th, td { border-bottom:1px solid #333; }
        input, select, textarea { background:#1e1e1e; color:#eaeaea; border:1px solid #333; }
        button { background:#2a2a2a; color:#eaeaea; border:1px solid #444; }
      }
      body.theme-dark { background:#111; color:#eaeaea; }
      body.theme-dark th, body.theme-dark td { border-bottom:1px solid #333; }
      body.theme-dark input, body.theme-dark select, body.theme-dark textarea { background:#1e1e1e; color:#eaeaea; border:1px solid #333; }
      body.theme-dark button { background:#2a2a2a; color:#eaeaea; border:1px solid #444; }
      body.theme-dark #themeToggleBtn { background:#1a1a1a; color:#8ab4ff; border-color:#3769e6; }
      body.theme-dark #themeToggleBtn:hover { background:#1f3a75; color:#eaeaea; }
      body.theme-light { background:#fff; color:#111; }
      body.theme-light th, body.theme-light td { border-bottom:1px solid #eee; }
      body.theme-light input, body.theme-light select, body.theme-light textarea { background:#fff; color:#111; border:1px solid #ccc; }
      body.theme-light button { background:#f5f5f5; color:#111; border:1px solid #ccc; }
      .pill { display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px; border:1px solid #ccc; }
      .pill.due { background:#fff3cd; border-color:#ffe69c; color:#8a6d3b; }
      .pill.overdue { background:#f8d7da; border-color:#f5c2c7; color:#842029; }
    </style>
    <script>
  function showManual(){ document.getElementById('manualModal').style.display='block'; }
  function closeManual(){ document.getElementById('manualModal').style.display='none'; }
  function applyTheme(pref){ document.body.classList.remove('theme-dark','theme-light'); if(pref==='dark') document.body.classList.add('theme-dark'); if(pref==='light') document.body.classList.add('theme-light'); }
  function updateThemeButton(pref){ const btn=document.getElementById('themeToggleBtn'); if(!btn) return; if(pref==='dark'){ btn.innerHTML='ğŸŒ™'; btn.title='ãƒ†ãƒ¼ãƒ: ãƒ€ãƒ¼ã‚¯'; btn.setAttribute('aria-label','ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰'); } else if(pref==='light'){ btn.innerHTML='â˜€ï¸'; btn.title='ãƒ†ãƒ¼ãƒ: ãƒ©ã‚¤ãƒˆ'; btn.setAttribute('aria-label','ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰'); } else { btn.innerHTML='ğŸŒ“'; btn.title='ãƒ†ãƒ¼ãƒ: è‡ªå‹•'; btn.setAttribute('aria-label','ãƒ†ãƒ¼ãƒ: è‡ªå‹•'); } }
  function initTheme(){ const pref=localStorage.getItem('theme')||'system'; applyTheme(pref); updateThemeButton(pref); }
  function toggleTheme(){ const current=localStorage.getItem('theme')||'system'; const next=current==='system'?'dark': current==='dark'?'light':'system'; localStorage.setItem('theme',next); applyTheme(next); updateThemeButton(next); }

      function escapeHtml(str){ if(!str) return ''; return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
      function toDateStr(d){ if(!d) return ''; try { return new Date(d).toISOString().slice(0,10); } catch(e){ return ''; } }
      function loadAll(){ loadCandidates(); loadUpcoming(); loadPartners(); }

      function loadCandidates(){
        const sel = document.getElementById('candidateSelect'); sel.innerHTML = '';
        google.script.run.withSuccessHandler(function(list){
          list.forEach(function(c){
            const opt = document.createElement('option'); opt.value = c.id; opt.textContent = (c.contactName||'(ç„¡å)') + ' â€” ' + (c.facilityId||''); sel.appendChild(opt);
          });
        }).getFacilityContacts({ limit: 200 });
      }
      function addPartner(){
        const id = document.getElementById('candidateSelect').value; if(!id){ alert('æ‹…å½“è€…ã‚’é¸æŠ'); return; }
        google.script.run.withSuccessHandler(function(){ alert('ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«è¿½åŠ ã—ã¾ã—ãŸ'); loadPartners(); }).updatePartnerContact({ id, partnerFlag: true, partnerType: document.getElementById('candidateType').value });
      }

      function loadPartners(){
        google.script.run.withSuccessHandler(function(list){
          const tbody = document.getElementById('partnersRows');
          if(!list || list.length===0){ tbody.innerHTML = '<tr><td colspan="8">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒæœªç™»éŒ²ã§ã™</td></tr>'; return; }
          let html='';
          list.forEach(function(p){
            html += '<tr>'+
              '<td>'+escapeHtml(p.facilityName||'')+'</td>'+
              '<td>'+escapeHtml(p.contactName||'')+'</td>'+
              '<td>'+escapeHtml(p.partnerType||'')+'</td>'+
              '<td>'+escapeHtml(stageLabel(p.stage))+'</td>'+
              '<td>'+ (p.referralCount||0) +'</td>'+
              '<td>'+ escapeHtml(p.lastActivityDate||'') +'</td>'+
              '<td>'+ escapeHtml(p.nextAction||'') +'</td>'+
              '<td>'+ escapeHtml(p.nextActionDate||'') +'</td>'+
              '<td><button onclick="openLog(\''+p.id+'\', \''+escapeHtml(p.contactName)+'\', \''+escapeHtml(p.facilityName)+'\')">è¨˜éŒ²</button> <button onclick="showLogs(\''+p.id+'\')">å±¥æ­´</button> <button onclick="unsetPartner(\''+p.id+'\')">è§£é™¤</button></td>'+
            '</tr>';
          });
          tbody.innerHTML = html;
  }).getPartnerContacts({});
      }
      function stageLabel(val){
        if(!val) return 'æœªè¨­å®š';
        const m={ 'æ½œåœ¨':'æ½œåœ¨','é–¢ä¿‚æ§‹ç¯‰ä¸­':'æ§‹ç¯‰ä¸­','å®‰å®š':'å®‰å®š','åœæ»':'åœæ»' };
        return m[val]||val;
      }
      function unsetPartner(id){
        if(!confirm('ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚’è§£é™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;
        google.script.run.withSuccessHandler(function(){ loadPartners(); loadUpcoming(); }).updatePartnerContact({ id, partnerFlag:false, stage:'' });
      }
      function showLogs(contactId){
        google.script.run.withSuccessHandler(function(list){
          const box=document.getElementById('historyPane');
          if(!list||list.length===0){ box.innerHTML='<div class="muted">å±¥æ­´ãªã—</div>'; return; }
          let html='';
          list.slice(0,10).forEach(function(a){
            html += '<div style="border-bottom:1px solid #eee; padding:4px 0;">'+
              '<b>'+escapeHtml(a.activityType)+' '+escapeHtml(a.activityDate)+'</b><br>'+escapeHtml(a.summary||'')+
              (a.nextActionDate? ('<br><span class="muted">æ¬¡: '+escapeHtml(a.nextActionDate)+'</span>'):'')+
              '</div>';
          });
          box.innerHTML=html;
          document.getElementById('historyModal').style.display='block';
        }).getPartnerActivities({ contactId: contactId });
      }
      function closeHistory(){ document.getElementById('historyModal').style.display='none'; }

      function loadUpcoming(){
        google.script.run.withSuccessHandler(function(list){
          const box = document.getElementById('upcomingList');
          if(!list || list.length===0){ box.innerHTML = '<div class="muted">ç›´è¿‘ã®ToDoã¯ã‚ã‚Šã¾ã›ã‚“</div>'; return; }
          let html='';
          const today = new Date();
          list.forEach(function(t){
            const dt = new Date(t.nextActionDate);
            const diff = Math.round((dt - today)/86400000);
            const cls = diff < 0 ? 'pill overdue' : 'pill due';
            html += '<div style="margin:6px 0;">'+
              '<span class="'+cls+'">'+ toDateStr(t.nextActionDate) +'</span> '+
              escapeHtml(t.contactName) + 'ï¼ˆ' + escapeHtml(t.partnerType||'') + 'ï¼‰ ' + escapeHtml(t.nextAction||'') +
              '</div>';
          });
          box.innerHTML = html;
        }).getUpcomingPartnerActions(14);
      }

      function openLog(id, contactName, facilityName){
        document.getElementById('logContactId').value = id;
        document.getElementById('logTitle').textContent = contactName + 'ï¼ˆ' + facilityName + 'ï¼‰ã¸ã®æ¥è§¦è¨˜éŒ²';
        document.getElementById('logDate').value = new Date().toISOString().slice(0,16);
        document.getElementById('logPane').style.display = 'block';
      }
      function closeLog(){ document.getElementById('logPane').style.display='none'; }
      function saveLog(){
        const contactId = document.getElementById('logContactId').value;
        const activityDate = document.getElementById('logDate').value;
        const activityType = document.getElementById('logType').value;
        const summary = document.getElementById('logSummary').value;
        const nextDays = Number(document.getElementById('logNextDays').value||0);
        const nextActionDate = nextDays>0 ? new Date(Date.now()+nextDays*86400000).toISOString() : '';
        google.script.run.withSuccessHandler(function(){
          alert('æ¥è§¦ã‚’è¨˜éŒ²ã—ã¾ã—ãŸ');
          closeLog(); loadUpcoming(); loadPartners();
        }).addPartnerActivity({ contactId, activityDate, activityType, summary, nextActionDate });
      }

      window.addEventListener('load', function(){ initTheme(); loadAll(); });
    </script>
  </head>
  <body>
    <nav>
      <a href="<?= ScriptApp.getService().getUrl(); ?>?page=index">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹</a>
      <a href="javascript:void(0)" onclick="showManual()">ä½¿ã„æ–¹ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</a>
  <button id="themeToggleBtn" type="button" onclick="toggleTheme()" aria-label="ãƒ†ãƒ¼ãƒåˆ‡æ›¿">ğŸŒ“</button>
    </nav>

    <h1>ç´¹ä»‹ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å–¶æ¥­</h1>
    <p class="muted">ç¶™ç¶šçš„ãªç´¹ä»‹ã‚’å¾—ã‚‹ãŸã‚ã®é–¢ä¿‚æ§‹ç¯‰ï¼ˆæ¥è§¦ãƒ­ã‚°ãƒ»æ¬¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ToDoï¼‰ã€‚</p>

    <section style="border:1px solid #eee; padding:12px; border-radius:6px;">
      <h3 style="margin-top:0;">ä»Šæ—¥ã€œ2é€±é–“ã®ToDo</h3>
      <div id="upcomingList"></div>
    </section>

    <section style="margin-top:16px; border:1px solid #eee; padding:12px; border-radius:6px;">
      <h3 style="margin-top:0;">æ‹…å½“è€…ã‚’ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«è¿½åŠ </h3>
      <div class="row">
        <div>
          <label>æ‹…å½“è€…</label>
          <select id="candidateSelect"></select>
        </div>
        <div>
          <label>ç¨®åˆ¥</label>
          <select id="candidateType">
            <option value="">-- é¸æŠ --</option>
            <option value="ã‚±ã‚¢ãƒãƒ">ã‚±ã‚¢ãƒãƒ</option>
            <option value="ç—…é™¢(MSW)">ç—…é™¢(MSW)</option>
            <option value="åœ°åŸŸåŒ…æ‹¬">åœ°åŸŸåŒ…æ‹¬</option>
            <option value="ç›¸è«‡æ”¯æ´">ç›¸è«‡æ”¯æ´</option>
            <option value="ç›¸è«‡å“¡">ç›¸è«‡å“¡</option>
            <option value="è¡Œæ”¿">è¡Œæ”¿</option>
            <option value="ãã®ä»–">ãã®ä»–</option>
          </select>
        </div>
      </div>
      <button onclick="addPartner()">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«è¿½åŠ </button>
    </section>

    <h2 style="margin-top:20px;">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ä¸€è¦§</h2>
    <div class="muted" style="margin-bottom:4px;">ã‚¹ãƒ†ãƒ¼ã‚¸: æ½œåœ¨ â†’ é–¢ä¿‚æ§‹ç¯‰ä¸­ â†’ å®‰å®š â†’ åœæ»ï¼ˆå†æ´»æ€§ãŒå¿…è¦ï¼‰</div>
    <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th>æ‰€å±(æ–½è¨­)</th>
          <th>æ°å</th>
          <th>ç¨®åˆ¥</th>
          <th>ã‚¹ãƒ†ãƒ¼ã‚¸</th>
          <th>ç´¹ä»‹å®Ÿç¸¾</th>
          <th>æœ€çµ‚æ¥è§¦</th>
          <th>æ¬¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>
          <th>å®Ÿæ–½äºˆå®šæ—¥</th>
          <th>æ“ä½œ</th>
        </tr>
      </thead>
      <tbody id="partnersRows">
        <tr><td colspan="8">èª­ã¿è¾¼ã¿ä¸­...</td></tr>
      </tbody>
    </table>
    </div>

    <!-- æ¥è§¦ãƒ­ã‚° ãƒ¢ãƒ¼ãƒ€ãƒ«é¢¨ -->
    <div id="logPane" style="display:none; position:fixed; left:0; right:0; top:0; bottom:0; background:rgba(0,0,0,.3);">
      <div style="max-width:560px; margin:5% auto; background:#fff; color:#111; padding:16px; border-radius:8px;">
        <h3 id="logTitle" style="margin-top:0;">æ¥è§¦è¨˜éŒ²</h3>
        <input type="hidden" id="logContactId">
        <div class="row">
          <div>
            <label>æ—¥æ™‚</label>
            <input id="logDate" type="datetime-local">
          </div>
          <div>
            <label>ç¨®åˆ¥</label>
            <select id="logType">
              <option value="è¨ªå•">è¨ªå•</option>
              <option value="é›»è©±">é›»è©±</option>
              <option value="ãƒ¡ãƒ¼ãƒ«">ãƒ¡ãƒ¼ãƒ«</option>
              <option value="ã‚¤ãƒ™ãƒ³ãƒˆ">ã‚¤ãƒ™ãƒ³ãƒˆ</option>
            </select>
          </div>
        </div>
        <label>æ¦‚è¦</label>
        <input id="logSummary" type="text" placeholder="ä¾‹: äº‹ä¾‹å…±æœ‰ãƒ»å‹‰å¼·ä¼šæ¡ˆå†…ãªã©">
        <div class="row">
          <div>
            <label>æ¬¡å›ã¾ã§ã®æ—¥æ•°ï¼ˆä»»æ„ï¼‰</label>
            <input id="logNextDays" type="number" min="0" placeholder="ä¾‹: 14">
          </div>
        </div>
        <div style="text-align:right; margin-top:12px;">
          <button onclick="closeLog()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
          <button onclick="saveLog()">ä¿å­˜</button>
        </div>
      </div>
    </div>
    <!-- å±¥æ­´è¡¨ç¤ºãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="historyModal" style="display:none; position:fixed; left:0; right:0; top:0; bottom:0; background:rgba(0,0,0,.35);">
      <div style="max-width:560px; margin:5% auto; background:#fff; color:#111; padding:16px; border-radius:8px; max-height:80%; overflow:auto;">
        <h3 style="margin-top:0;">æ¥è§¦å±¥æ­´ (æœ€æ–°10ä»¶)</h3>
        <div id="historyPane">èª­ã¿è¾¼ã¿ä¸­...</div>
        <div style="text-align:right; margin-top:12px;">
          <button onclick="closeHistory()">é–‰ã˜ã‚‹</button>
        </div>
      </div>
    </div>
    <!-- ãƒãƒ‹ãƒ¥ã‚¢ãƒ«è¡¨ç¤ºãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="manualModal" style="display:none; position:fixed; left:0; right:0; top:0; bottom:0; background:rgba(0,0,0,.35);">
      <div style="max-width:760px; margin:4% auto; background:#fff; color:#111; padding:18px; border-radius:8px; max-height:80%; overflow:auto;">
  <h2 style="margin-top:0;">ç´¹ä»‹ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ©Ÿèƒ½ â€” éšœå®³è€…ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ  / è¨ªå•çœ‹è­·ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</h2>
  <p class="muted">ã“ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¯ã€éšœå®³è€…ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ ã‚„è¨ªå•çœ‹è­·ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¾å ´ã‚¹ã‚¿ãƒƒãƒ•ãŒæ—¥å¸¸çš„ã«ç´¹ä»‹ã‚’ç¶™ç¶šã—ã¦ã„ãŸã ããŸã‚ã®å®Ÿå‹™ãƒ•ãƒ­ãƒ¼ã¨æ“ä½œæ‰‹é †ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚ã¾ãšã¯ ToDo ã‚’ç¢ºèªã—ã€æ¥è§¦ â†’ è¨˜éŒ² â†’ æ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç™»éŒ² ã®ã‚µã‚¤ã‚¯ãƒ«ã‚’å›ã—ã¾ã—ã‚‡ã†ã€‚</p>

        <h3>1. ç›®çš„</h3>
        <ul>
          <li>æ—¢å­˜ã®æ‹…å½“è€…ã¨è‰¯å¥½ãªé–¢ä¿‚ã‚’ç¶­æŒã—ã€å®‰å®šçš„ã«ç´¹ä»‹ã‚’å—ã‘ã‚‹ã€‚</li>
          <li>æ¥è§¦å±¥æ­´ã¨æ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜éŒ²ã—ã¦ã€ãƒ•ã‚©ãƒ­ãƒ¼ã®æŠœã‘æ¼ã‚Œã‚’é˜²ãã€‚</li>
          <li>ç´¹ä»‹ã®æˆæœï¼ˆreferralï¼‰ã‚’è¿½è·¡ã§ãã‚‹åŸºç›¤ã‚’ä½œã‚‹ã€‚</li>
        </ul>

        <h3>2. æ—¥å¸¸ã®åŸºæœ¬ãƒ•ãƒ­ãƒ¼ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ï¼‰</h3>
        <ol>
          <li>ç”»é¢ä¸Šéƒ¨ã®ã€Œä»Šæ—¥ã€œ2é€±é–“ã®ToDoã€ã‚’ç¢ºèªã™ã‚‹ã€‚â†’ å½“æ—¥ã€œè¿‘æœŸã«ãƒ•ã‚©ãƒ­ãƒ¼ã™ã¹ãç›¸æ‰‹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</li>
          <li>è©²å½“æ‹…å½“è€…ã¸é€£çµ¡ï¼ˆé›»è©±ï¼é¢è«‡ï¼‰ã‚’è¡Œã†ã€‚ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä¸‹è¨˜å‚ç…§ã€‚</li>
          <li>é€£çµ¡å¾Œã€è©²å½“è¡Œã®ã€Œè¨˜éŒ²ã€ãƒœã‚¿ãƒ³ã‹ã‚‰æ¥è§¦ãƒ­ã‚°ã‚’æ®‹ã™ã€‚è¦ç‚¹ï¼ˆè©±é¡Œãƒ»ç´¹ä»‹å¯å¦ãƒ»æ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ã‚’ç°¡æ½”ã«å…¥åŠ›ã€‚</li>
          <li>æ¬¡å›ãƒ•ã‚©ãƒ­ãƒ¼ãŒå¿…è¦ãªã‚‰ã€Œæ¬¡å›ã¾ã§ã®æ—¥æ•°ã€ã‚’å…¥ã‚Œã¦ä¿å­˜ã€‚ToDo ã«æˆ»ã‚Šã€æ—¥ä»˜ãŒåæ˜ ã•ã‚Œã¾ã™ã€‚</li>
        </ol>

        <h3>3. å…·ä½“çš„ãªå…¥åŠ›ãƒ†ãƒ³ãƒ—ãƒ¬ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ ï¼è¨ªå•çœ‹è­·å‘ã‘ã®é›»è©±ç”¨ï¼‰</h3>
        <div style="background:#f8f9fa; padding:10px; border-radius:6px;">
          <b>é›»è©±ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆä¾‹ï¼‰</b><br>
          ã“ã‚“ã«ã¡ã¯ã€â—‹â—‹ï¼ˆã‚µãƒ¼ãƒ“ã‚¹åï¼‰ã®â–³â–³ã§ã™ã€‚ã„ã¤ã‚‚ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚ç¾åœ¨ã€ï¼ˆåˆ©ç”¨å¯èƒ½ãªã‚µãƒ¼ãƒ“ã‚¹/ç©ºãçŠ¶æ³/æ”¯æ´å†…å®¹ï¼‰ã«ã¤ã„ã¦ã”æ¡ˆå†…ã—ã¦ã„ã¾ã™ã€‚ã‚‚ã—ã”åˆ©ç”¨è€…æ§˜ã®ä¸­ã§ãƒ‹ãƒ¼ã‚ºãŒã‚ã‚Šãã†ãªæ–¹ãŒã„ã‚Œã°ã€ç°¡å˜ã«ã”ç´¹ä»‹ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ï¼Ÿã¾ãšã¯ç°¡å˜ã«çŠ¶æ³ã‚’ä¼ºã„ã€å¿…è¦ãŒã‚ã‚Œã°è©³ã—ã„ã”ææ¡ˆã«ãŠä¼ºã„ã—ã¾ã™ã€‚<br>
          <div class="muted" style="margin-top:6px;">è¨˜éŒ²ã®ãƒã‚¤ãƒ³ãƒˆï¼šç´¹ä»‹ã®å¯å¦ï¼ˆå¯ï¼ä¿ç•™ï¼ä¸å¯ï¼‰ã€æƒ³å®šæ™‚æœŸã€å¯¾å¿œè€…ï¼ˆèª°ãŒç´¹ä»‹ã™ã‚‹ã‹ï¼‰ã€æ¬¡å›é€£çµ¡äºˆå®š</div>
        </div>

        <h3>4. ã‚¹ãƒ†ãƒ¼ã‚¸ã®é‹ç”¨æ–¹é‡ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ /è¨ªå•çœ‹è­·å‘ã‘ï¼‰</h3>
        <ul>
          <li>æ½œåœ¨ï¼šç´¹ä»‹ã®å¯èƒ½æ€§ã¯ã‚ã‚‹ãŒæ¥ç‚¹ãŒè–„ã„ã€‚æ¥­å‹™ãŒå¤šå¿™ãªç¾å ´ãŒå¤šã„ãŸã‚ã€çŸ­ã„æƒ…å ±ï¼ˆ1æšã®æ¡ˆå†…ï¼‰ã‚’å®šæœŸçš„ã«é€ã‚‹ã¨è‰¯ã„ã€‚</li>
          <li>é–¢ä¿‚æ§‹ç¯‰ä¸­ï¼šã‚„ã‚Šå–ã‚ŠãŒå¢—ãˆã€æ¥­å‹™ä¸Šã®ä¿¡é ¼ãŒå‡ºã¦ããŸæ®µéšã€‚äº‹ä¾‹å…±æœ‰ã‚„çŸ­æ™‚é–“ã®è¨ªå•ã§é–¢ä¿‚ã‚’æ·±ã‚ã‚‹ã¨åŠ¹æœçš„ã§ã™ã€‚</li>
          <li>å®‰å®šï¼šç´¹ä»‹ãŒå®šæœŸçš„ã«å‡ºã‚‹è‰¯å¥½ãªé–¢ä¿‚ã€‚ç´¹ä»‹è€…ã¸æ„Ÿè¬ã®é€£çµ¡ã‚„ç°¡æ½”ãªçµæœå ±å‘Šï¼ˆç´¹ä»‹ã«ã¤ãªãŒã£ãŸå ´åˆï¼‰ã‚’è¡Œã„é–¢ä¿‚ã‚’ç¶­æŒã™ã‚‹ã€‚</li>
          <li>åœæ»ï¼šå¿™ã—ã•ã‚„äººäº‹ç•°å‹•ã§æ¥ç‚¹ãŒé€”åˆ‡ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã€‚å†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼ˆæƒ…å ±æ›´æ–°ã‚„è¨ªå•ã®ææ¡ˆï¼‰ã‚’è¨ˆç”»ã—ã¦ãã ã•ã„ã€‚</li>
        </ul>

        <h3>5. ç´¹ä»‹ãŒå‡ºãŸã‚‰ï¼ˆæˆæœã®å–ã‚Šæ‰±ã„ï¼‰</h3>
        <ol>
          <li>ç´¹ä»‹å…ˆã®æ°åãƒ»é€£çµ¡å…ˆãƒ»ç›¸è«‡å†…å®¹ã‚’ Reports/Visits ç­‰ã®è©²å½“æ©Ÿèƒ½ã§è¨˜éŒ²ã™ã‚‹ã€‚</li>
          <li>ç´¹ä»‹ãŒæˆç´„ï¼ˆåˆ©ç”¨é–‹å§‹ï¼‰ã«ç¹‹ãŒã£ãŸå ´åˆã¯ã€è©²å½“ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã® referralCount ã‚’å¢—ã‚„ã™é‹ç”¨ã‚’è¡Œã†ï¼ˆç¾çŠ¶ã¯æ‰‹å‹•ã€å¿…è¦ãªã‚‰è‡ªå‹•åŒ–å¯èƒ½ï¼‰ã€‚</li>
        </ol>

        <h3>6. ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ»é‹ç”¨ä¸Šã®æ³¨æ„</h3>
        <ul>
          <li>å€‹äººæƒ…å ±ï¼ˆæ°åãƒ»é€£çµ¡å…ˆãƒ»åŒ»ç™‚æƒ…å ±ãªã©ï¼‰ã¯å¿…è¦æœ€å°é™ã«è¨˜éŒ²ã—ã¦ãã ã•ã„ã€‚</li>
          <li>å…±æœ‰ã™ã‚‹æƒ…å ±ã¯æœ¬äººåŒæ„ã®æœ‰ç„¡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼ˆç‰¹ã«åŒ»ç™‚æƒ…å ±ï¼‰ã€‚</li>
          <li>ã‚·ã‚¹ãƒ†ãƒ ã¸ã®å…¥åŠ›ã¯èª¤å­—ã‚„å€‹åˆ¥ã®è­˜åˆ¥å­ã‚’å«ã‚ãªã„ãªã©é™¢å†…ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ãã ã•ã„ã€‚</li>
        </ul>

        <h3>7. ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰</h3>
        <dl>
          <dt>Q: èª°ã‚’ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ã™ã¹ãã§ã™ã‹ï¼Ÿ</dt>
          <dd>A: éšœå®³è€…ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ ã®ç®¡ç†è€…ã‚„ç”Ÿæ´»æ”¯æ´ã‚¹ã‚¿ãƒƒãƒ•ã€è¨ªå•çœ‹è­·ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ç®¡ç†è€…ãƒ»è¨ªå•çœ‹è­·å¸«ã€ç›¸è«‡æ”¯æ´å°‚é–€å“¡ï¼ˆéšœå®³åˆ†é‡ï¼‰ãªã©ã€å®Ÿéš›ã«åˆ©ç”¨è€…ã®ç´¹ä»‹çµŒè·¯ã‚’æŒã¤æ–¹ã‚’å„ªå…ˆã—ã¦ãã ã•ã„ã€‚</dd>
          <dt>Q: å±¥æ­´ã®ç·¨é›†ã¯ã§ãã¾ã™ã‹ï¼Ÿ</dt>
          <dd>A: ç¾çŠ¶ã¯å±¥æ­´ã®ç·¨é›†/å‰Šé™¤ã¯ UI ã§æœªå¯¾å¿œã§ã™ã€‚å¿…è¦ã§ã‚ã‚Œã°å®Ÿè£…ã—ã¾ã™ã€‚</dd>
        </dl>

        <div style="text-align:right; margin-top:12px;"><button onclick="closeManual()">é–‰ã˜ã‚‹</button></div>
      </div>
    </div>
  </body>
</html>
